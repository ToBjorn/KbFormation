{"version":3,"file":"chunk/client.2596864e9d5ccad126c0.js","mappings":"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","sources":["webpack:///./components/app.js"],"sourcesContent":["/* required library for our React app */\nvar ReactDOM = require('react-dom')\nvar React = require(\"react\")\nvar Qs = require(\"qs\")\nvar Cookie = require(\"cookie\")\nvar localhost = require('reaxt/config').localhost\nvar XMLHttpRequest = require(\"xhr2\")\nvar createReactClass = require('create-react-class')\n\n/* required css for our application */\nrequire('../tonys.webflow/css/webflow.css');\nrequire('../tonys.webflow/css/tonys.webflow.css');\n\nvar HTTP = new (function () {\n  this.get = (url) => this.req('GET', url)\n  this.delete = (url) => this.req('DELETE', url)\n  this.post = (url, data) => this.req('POST', url, data)\n  this.put = (url, data) => this.req('PUT', url, data)\n\n  this.req = (method, url, data) => {\n    return new Promise((resolve, reject) => {\n      var req = new XMLHttpRequest()\n      url = (typeof window !== 'undefined') ? url : localhost + url\n      req.open(method, url)\n      req.responseType = \"text\"\n      req.setRequestHeader(\"accept\", \"application/json,*/*;0.8\")\n      req.setRequestHeader(\"content-type\", \"application/json\")\n      req.onload = () => {\n        if (req.status >= 200 && req.status < 300) {\n          resolve(req.responseText && JSON.parse(req.responseText))\n        } else {\n          reject({ http_code: req.status })\n        }\n      }\n      req.onerror = (err) => {\n        reject({ http_code: req.status })\n      }\n      req.send(data && JSON.stringify(data))\n    })\n  }\n})\n\nvar remoteProps = {\n  user: (props) => {\n    return {\n      url: \"/api/me\",\n      prop: \"user\"\n    }\n  },\n  orders: (props) => {\n    var qs = { ...props.qs }\n    var query = Qs.stringify(qs)\n    return {\n      url: \"/api/orders\" + (query == '' ? '' : '?' + query),\n      prop: \"orders\"\n    }\n  },\n  order: (props) => {\n    return {\n      url: \"/api/order/\" + props.order_id,\n      prop: \"order\"\n    }\n  }\n}\n\nvar routes = {\n  \"orders\": {\n    path: (params) => {\n      return \"/\";\n    },\n    match: (path, qs) => {\n      return (path == \"/\") && { handlerPath: [Layout, Header, Orders] } // Note that we use the \"&&\" expression to simulate a IF statement\n    }\n  },\n  \"order\": {\n    path: (params) => {\n      return \"/order/\" + params;\n    },\n    match: (path, qs) => {\n      var r = new RegExp(\"/order/([^/]*)$\").exec(path)\n      return r && { handlerPath: [Layout, Header, Order], order_id: r[1] } // Note that we use the \"&&\" expression to simulate a IF statement\n    }\n  }\n}\n\nvar Layout = createReactClass({\n  getInitialState() {\n    return {\n      modal: null,\n      loader: null,\n      page: 1\n    }\n  },\n  loader(promise) {\n    this.setState({ loader: 'loading' })\n    promise.then(() => {\n      this.setState({ loader: null, modal: null })\n    })\n    return promise;\n  },\n  modal(spec) {\n    this.setState({\n      modal: {\n        ...spec, callback: (res) => {\n          if (spec.callback)\n            spec.callback(res)\n        }\n      }\n    })\n  },\n  render() {\n    if (this.state.modal) {\n      var modal_component = {\n        'delete': (props) => <DeleteModal {...props} />,\n      }[this.state.modal && this.state.modal.type];\n      modal_component = modal_component && modal_component(this.state.modal)\n    }\n    if (this.state.loader) {\n      var loader_component = <LoadingModal {...props} />\n    }\n    var props = {\n      ...this.props, modal: this.modal, loader: this.loader, page: this.props.qs[\"page\"] || this.state.page\n    }\n    return <JSXZ in=\"orders\" sel=\".layout\">\n      <Z sel=\".modal-wrapper\" className={cn(classNameZ, { 'hidden': !modal_component })}>\n        {modal_component}\n      </Z>\n      <Z sel=\".loader-wrapper\" className={cn(classNameZ, { 'hidden': !loader_component })}>\n        {loader_component}\n      </Z>\n      <Z sel=\".layout-container\">\n        <this.props.Child {...props} />\n      </Z>\n    </JSXZ>\n  }\n})\n\nvar Header = createReactClass({\n  render() {\n    return <JSXZ in=\"orders\" sel=\".header-container\">\n      <Z sel=\".orders-container\">\n        <this.props.Child {...this.props} />\n      </Z>\n    </JSXZ>\n  }\n})\n\nfunction arrayRemove(arr, value) {\n  return arr.filter(function (ele) {\n    return ele[0] != value;\n  });\n}\n\nvar Orders = createReactClass({\n  statics: {\n    remoteProps: [remoteProps.orders]\n  },\n  render() {\n    let reste = parseInt(this.props.orders.value[0]) % 30\n    let nbrPage = parseInt(this.props.orders.value[0]) / 30\n    if (reste > 0) nbrPage++;\n    nbrPage = parseInt(nbrPage)\n\n    return <JSXZ in=\"orders\" sel=\".orders-container\">\n      <Z sel=\".collection-item\">\n        {this.props.orders.value[1]?.map(order => (<JSXZ in=\"orders\" sel=\".table-line\">\n          <Z sel=\".blockcommand\">{order[1].remoteid}</Z>\n          <Z sel=\".blockcustomer\">{order[1].custom.customer.full_name}</Z>\n          <Z sel=\".blockaddress\">{order[1].custom.shipping_address.street + \" \" + order[1].custom.shipping_address.postcode + \" \" + order[1].custom.shipping_address.city}</Z>\n          <Z sel=\".blockquantity\">{order[1].custom.items.length}</Z>\n          <Z sel=\".buttondetails\" onClick={(e) => Link.GoTo(\"order\", order[0])}><ChildrenZ /></Z>\n          <Z sel=\".buttonpay\">\n            <span class=\"text-span\">ÔÅ°</span>\n            <br />Status: {order[1].status.state}\n            <br />Payment method: {order[1].custom.shipping_method_ui}\n          </Z>\n          <Z sel=\".buttondelete\" onClick={() => (\n            this.props.modal({\n              type: 'delete',\n              callback: (value) => {\n                if (value) {\n                  this.props.loader(HTTP.delete(\"/api/order/\" + order[0])).then(() => {\n                    this.props.orders.value[1] = arrayRemove(this.props.orders.value[1], order[0]);\n                    this.props.orders.value[0] = parseInt(this.props.orders.value[0]) - 1\n                    Link.GoTo(\"orders\")\n                  });\n                }\n              }\n            }))}><ChildrenZ /></Z>\n        </JSXZ>))}\n      </Z>\n      <Z sel=\".page-container\">\n        <JSXZ in=\"orders\" sel=\".pageButtons\">\n          <Z sel=\".pagePrev\" onClick={() => {\n            if (parseInt(this.props.page) > 1) {\n              if (parseInt(this.props.page) == 2) {\n                Link.GoTo(\"orders\")\n              } else {\n                Link.GoTo(\"orders\", \"\", { page: parseInt(this.props.page) - 1 });\n              }\n            }\n          }}><ChildrenZ /></Z>\n          <Z sel=\".pageNext\" onClick={() => {\n            if (parseInt(this.props.page) < nbrPage) {\n              Link.GoTo(\"orders\", \"\", { page: parseInt(this.props.page) + 1 });\n            }\n          }}><ChildrenZ /></Z>\n          <Z sel=\".pageCount\">{parseInt(this.props.page)}/{nbrPage}</Z>\n        </JSXZ>\n      </Z>\n    </JSXZ>\n  }\n})\n\nvar Order = createReactClass({\n  statics: {\n    remoteProps: [remoteProps.order]\n  },\n  render() {\n    return <JSXZ in=\"order-details\" sel=\".container\">\n      <Z sel=\".w-dyn-items\">\n        <JSXZ in=\"order-details\" sel=\".w-dyn-item\">\n          <Z sel=\".customer\">{this.props.order.value.custom.customer.full_name}</Z>\n          <Z sel=\".address\">{this.props.order.value.custom.shipping_address.street + \" \" + this.props.order.value.custom.shipping_address.postcode + \" \" + this.props.order.value.custom.shipping_address.city}</Z>\n          <Z sel=\".commandnumber\">{this.props.order.value.remoteid}</Z>\n        </JSXZ>\n      </Z>\n      <Z sel=\".order-details-list\">\n        {this.props.order.value.custom.items.map(item => (<JSXZ in=\"order-details\" sel=\".table-line\">\n          <Z sel=\".product-name\">{item.product_title}</Z>\n          <Z sel=\".quantity\">{item.quantity_to_fetch}</Z>\n          <Z sel=\".unitprice\">{item.unit_price}</Z>\n          <Z sel=\".totalprice\">{item.quantity_to_fetch * item.unit_price}</Z>\n        </JSXZ>))\n        }\n      </Z>\n      <Z sel=\".goback\" onClick={() => Link.GoTo(\"orders\")}><ChildrenZ /></Z>\n    </JSXZ>\n  }\n})\n\nvar Child = createReactClass({\n  render() {\n    var [ChildHandler, ...rest] = this.props.handlerPath\n    return <ChildHandler {...this.props} handlerPath={rest} />\n  }\n})\n\nvar ErrorPage = createReactClass({\n  render() {\n    return <div style={{ padding: \"1rem\" }}>\n      <p>{this.props.code}</p>\n      <p>{this.props.message}</p>\n    </div>\n  }\n})\n\nvar DeleteModal = createReactClass({\n  render() {\n    return <JSXZ in=\"delete-modal\" sel=\".modal-wrapper\">\n      <Z sel=\".declinebutton\" onClick={() => this.props.callback(false)}><ChildrenZ /></Z>\n      <Z sel=\".acceptbutton\" onClick={() => this.props.callback(true)}><ChildrenZ /></Z>\n    </JSXZ>\n  }\n})\n\nvar LoadingModal = createReactClass({\n  render() {\n    return <JSXZ in=\"loading-modal\" sel=\".modal-wrapper\">\n    </JSXZ>\n  }\n})\n\nvar cn = function () {\n  var args = arguments, classes = {}\n  for (var i in args) {\n    var arg = args[i]\n    if (!arg) continue\n    if ('string' === typeof arg || 'number' === typeof arg) {\n      arg.split(\" \").filter((c) => c != \"\").map((c) => {\n        classes[c] = true\n      })\n    } else if ('object' === typeof arg) {\n      for (var key in arg) classes[key] = arg[key]\n    }\n  }\n  return Object.keys(classes).map((k) => classes[k] && k || '').join(' ')\n}\n\nvar browserState = {}\n\nfunction inferPropsChange(path, query, cookies) { // the second part of the onPathChange function have been moved here\n  browserState = {\n    ...browserState,\n    path: path, qs: query,\n    Link: Link,\n    Child: Child\n  }\n\n  var route, routeProps\n  for (var key in routes) {\n    routeProps = routes[key].match(path, query)\n    if (routeProps) {\n      route = key\n      break\n    }\n  }\n\n  if (!route) {\n    return new Promise((res, reject) => reject({ http_code: 404 }))\n  }\n  browserState = {\n    ...browserState,\n    ...routeProps,\n    route: route\n  }\n\n  return addRemoteProps(browserState).then(\n    (props) => {\n      browserState = props\n    })\n}\n\nvar Link = createReactClass({\n  statics: {\n    renderFunc: null, //render function to use (differently set depending if we are server sided or client sided)\n    GoTo(route, params, query) {// function used to change the path of our browser\n      var path = routes[route].path(params)\n      var qs = Qs.stringify(query)\n      var url = path + (qs == '' ? '' : '?' + qs)\n      history.pushState({}, \"\", url)\n      Link.onPathChange()\n    },\n    onPathChange() { //Updated onPathChange\n      var path = location.pathname\n      var qs = Qs.parse(location.search.slice(1))\n      var cookies = Cookie.parse(document.cookie)\n      inferPropsChange(path, qs, cookies).then( //inferPropsChange download the new props if the url query changed as done previously\n        () => {\n          Link.renderFunc(<Child {...browserState} />) //if we are on server side we render \n        }, ({ http_code }) => {\n          Link.renderFunc(<ErrorPage message={\"Not Found\"} code={http_code} />, http_code) //idem\n        }\n      )\n    },\n    LinkTo: (route, params, query) => {\n      var qs = Qs.stringify(query)\n      return routes[route].path(params) + ((qs == '') ? '' : ('?' + qs))\n    }\n  },\n  onClick(ev) {\n    ev.preventDefault();\n    Link.GoTo(this.props.to, this.props.params, this.props.query);\n  },\n  render() {//render a <Link> this way transform link into href path which allows on browser without javascript to work perfectly on the website\n    return (\n      <a href={Link.LinkTo(this.props.to, this.props.params, this.props.query)} onClick={this.onClick}>\n        {this.props.children}\n      </a>\n    )\n  }\n})\n\nfunction addRemoteProps(props) {\n  return new Promise((resolve, reject) => {\n    var remoteProps = Array.prototype.concat.apply([],\n      props.handlerPath\n        .map((c) => c.remoteProps) // -> [[remoteProps.orders], null]\n        .filter((p) => p) // -> [[remoteProps.orders]]\n    )\n    remoteProps = remoteProps\n      .map((spec_fun) => spec_fun(props)) // [{url: '/api/orders', prop: 'orders'}]\n      .filter((specs) => specs) // get rid of undefined from remoteProps that don't match their dependencies\n      .filter((specs) => !props[specs.prop] || props[specs.prop].url != specs.url) // get rid of remoteProps already resolved with the url\n    if (remoteProps.length == 0)\n      return resolve(props)\n    const promise_mapper = (spec) => {\n      // we want to keep the url in the value resolved by the promise here : spec = {url: '/api/orders', value: ORDERS, prop: 'orders'}\n      return HTTP.get(spec.url).then((res) => { spec.value = res; return spec })\n    }\n\n    const reducer = (acc, spec) => {\n      // spec = url: '/api/orders', value: ORDERS, prop: 'user'}\n      acc[spec.prop] = { url: spec.url, value: spec.value }\n      return acc\n    }\n\n    const promise_array = remoteProps.map(promise_mapper)\n    return Promise.all(promise_array)\n      .then(xs => xs.reduce(reducer, props), reject)\n      .then((p) => {\n        // recursively call remote props, because props computed from\n        // previous queries can give the missing data/props necessary\n        // to define another query\n        return addRemoteProps(p).then(resolve, reject)\n      }, reject)\n  })\n}\n\nexport default {\n  reaxt_server_render(params, render) {\n    inferPropsChange(params.path, params.query, params.cookies)\n      .then(() => {\n        render(<Child {...browserState} />)\n      }, (err) => {\n        render(<ErrorPage message={\"Not Found :\" + err.url} code={err.http_code} />, err.http_code)\n      })\n  },\n  reaxt_client_render(initialProps, render) {\n    browserState = initialProps\n    Link.renderFunc = render\n    window.addEventListener(\"popstate\", () => { Link.onPathChange() })\n    Link.onPathChange()\n  }\n}\n"],"names":["require","React","Qs","Cookie","localhost","XMLHttpRequest","createReactClass","HTTP","this","get","url","req","delete","post","data","put","method","Promise","resolve","reject","window","open","responseType","setRequestHeader","onload","status","responseText","JSON","parse","http_code","onerror","err","send","stringify","remoteProps","user","props","prop","orders","qs","query","order","order_id","routes","path","params","match","handlerPath","Layout","Header","Orders","r","RegExp","exec","Order","getInitialState","modal","loader","page","promise","setState","then","spec","callback","res","render","state","modal_component","DeleteModal","type","loader_component","LoadingModal","className","cn","Child","statics","reste","parseInt","value","nbrPage","map","remoteid","custom","customer","full_name","shipping_address","street","postcode","city","items","length","onClick","e","Link","GoTo","class","shipping_method_ui","arr","filter","ele","arrayRemove","item","product_title","quantity_to_fetch","unit_price","ChildHandler","rest","ErrorPage","style","padding","code","message","args","arguments","classes","i","arg","split","c","key","Object","keys","k","join","browserState","inferPropsChange","cookies","route","routeProps","addRemoteProps","renderFunc","history","pushState","onPathChange","location","pathname","search","slice","document","cookie","LinkTo","ev","preventDefault","to","href","children","Array","prototype","concat","apply","p","spec_fun","specs","reducer","acc","promise_array","all","xs","reduce","reaxt_server_render","reaxt_client_render","initialProps","addEventListener"],"sourceRoot":""}